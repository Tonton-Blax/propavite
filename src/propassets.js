import { writable } from "svelte/store";
export const typographicScrollProgress = writable(0);
const R = Math.PI / Math.E;

export const onScrollAssets = (elementsCheesy, isMobile) =>  { 
    return {
        // TODO SCROLL intro + minimalist + whether 
        intro : [
            {
                target:'.circle-white',
                scale:5,
                duration: 3,
                opacity : 10,
                autoAlpha : 1,
                stagger: { ease: "power1.inOut", grid : 'auto', from : 42, amount : 1.3, each : 1.05 },
            },
            
            { target:'#title-whether', duration:1.5,  time: '>-65%', autoAlpha : 1 },
            { scale:120, transformOrigin : '50.95% 60%', ease: "power4.in", duration : 2, time :'>+=5%' },
            { autoAlpha : 0, time : '>-50%', duration:1 },
            {
                target : '#propa-1-grid, #propa-1 > .propaganda-wrapper_image',
                startAt : { autoAlpha : 1 },
                autoAlpha : 0,
                time: '>-50%',
                duration: 1,
                // trigger : '#grid-minimalist'
            },
                {
                    time:'>-60%',
                    scale:1,
                    duration:0.6,
                    target : '.lignes',
                    stagger: { ease: "power1.inOut", grid : 'auto', from : 'center', amount : 1.3, each : 1.05 },
                },{
                    time:'>+25%',
                    target : '.sub-ligne',
                    scaleY:6,
                    scaleX: 0.1,
                    borderRadius : '0', startAt : { borderRadius : '50%'},
                    duration : 3
                    //rotate : (i)=> `${(i * 0.125)%1}turn`
                },
            ,{
                target:'#title-minimalist',
                "--fwgt": 100, // font weight
                "--fwdt": 150, // Font stretch
                duration:2,
                time:'<'
                // trigger : '#grid-minimalist'
            }, 
            { duration : 0.5 }
        ],

        // TODO SCROLL cheesy

        cheesy : [
            {
                target : '.reverbere',
                xPercent: 300,
                scale : (i) => 1 + i / elementsCheesy,
            },{
                target : '#propa-cheesy > .propaganda-wrapper_image > img', // le ciel
                translateX: isMobile ? null :  "5vw",
                time : '<'
            },{
                target : '.palmier',
                xPercent: 200,
                scale : (i) => 1 + ( (i/1.5) / elementsCheesy),
                time: '<'
            }
        ],

        poetic : [
            {
                target : '#propa-3-poetic > .propaganda-wrapper_image',
                yPercent: -20,
                ease: 'linear',
                duration:3
            },{
                set: {scale:-1},
                target:'.feather-img',
                time:'<',
                duration: 2,
                rotateZ : (i) => 100 +( (i+1) * (Math.random() * 360)),
                x : (i) => -500 + ((i+1) + (Math.random() * 500)),
                y : (i) => -500 + ((i+1) + (Math.random() * 500)),
            }, {
                target: '.poetic',
                x: 0,
                opacity : 0,
                duration:3,
                yPercent: (i) => i > 2 ? -150 * (2-i) : -150 * (i+1),
                xPercent : (i) => [0,1,3].includes(i) ? -150 * i : 150 * (i+1),
                scale : (i) => i,
                time : '<+10%',
                stagger: {
                    grid: [3,2],
                    from : 'center',
                    ease: "power3.inOut",
                }
            }
        ],

        // TODO SCROLL fish + retrochic

        retrochic : [
            {
                target:'#propa-mask',
                scale : isMobile ? 50:20,
                opacity:0,
                transformOrigin : isMobile ? '45% 45%' : '45% 50%', 
                set : { transformOrigin : '50% 50%' },
                duration : 5,
                ease:'power1.in'
            }, 
            {    
                target : '.retrochic-container',
                autoAlpha : 1,
                duration:4,
                time : '<+=50%'
            },{
                target : '.retrochic-element',
                set : { rotate : (i) => -Math.random()*360*(i+1) },
                y : (i) => -window.innerHeight * 1.2,
                duration : 10,
                stagger : { grid : 'auto', from : 'edges', each : 0.25 },
                ease : 'power2.in',
                time:'>+=10%'
            }
        ],
    }
}

export const typographicPaths = [
    ["M140,0H0V113.95H3.84c-.79-23.43,6.35-39.7,30.17-67.89C60.62,17.07,76.5,9.13,115.01,5.16L46.56,140h93.44V0Z"],
    ["M39.64,140c-2.06-11.16-2.85-24.44-2.85-42.98,0-26.79,2.25-44.84,8.16-62.05C52.27,12.97,61,3.95,75.91,3.95c16.88,0,31.52,10.72,44.74,32.71,10.89,17.63,16.51,33.88,19.35,54.24V1.13h-.49c-.56,3.95-1.12,5.92-2.81,7.33-3.94,3.38-9.29,5.36-13.79,5.36-4.78,0-13.51-2.54-23.64-7.05C88.29,1.97,80.13,0,70.28,0,53.68,0,35.67,6.49,17.94,18.9,11.34,23.56,5.32,29.06,0,35.17v104.83H39.64Z"],
    ["M83.29,35.63c27.45,0,48.05-14.08,54.54-35.63H30.03c6.41,21.83,26.09,35.63,53.27,35.63Z", "M140,49.34H0v7.75H8.09c19.7,.6,25.67,5.37,26.26,20.87v62.04h105.65V49.34Z"],
    ["M0,3.61c11.59,1.53,18.54,6.04,22.41,14.61,7.66,15.78,12.58,46.25,12.58,82.17,0,14.25-.78,27.65-2.19,39.61h96.35c7.01-12.93,10.85-27.21,10.85-42.33C140,47.72,104.31,10.5,50.25,0H0V3.61Z"],
    ["M140,136.39L85.69,52.11l23.49-23.92c11.95-10.25,22.07-18.65,30.82-25.52V0h-28.4c-1.83,10.86-7.98,22.65-16.51,31.18L31.44,93.55V0H0V140H31.44v-22.53l12.5,22.53h96.06v-3.61Z"],
    ["M72.22,24.1c0-8.43-2.3-16.85-6.57-24.1H0V61.03c7.24,4.66,15.89,7.35,25.24,7.35,26.46,0,46.98-19.44,46.98-44.28Z", "M55.48,140v-13.84c1.62-31.86,7.02-42.66,30.24-60.48,2.7-2.16,9.72-8.64,17.28-16.2V119.14c0,7.12-.53,14.13-1.48,20.86h38.47V0h-35.92c0,.11,0,.22,0,.34,0,22.14-4.32,41.58-10.8,50.22-9.18,11.88-32.4,22.68-62.1,28.08-12.26,2.36-22.67,5.23-31.18,8.53v52.83H55.48Z"],
    ["M0,140H140v-4.49h-14.07c-19.32-.5-23.28-3.96-31.2-31.2L59.43,0H0V140Z"],
    ["M43.02,66.38q54.32,18.1,63.53,26.05c6.99,6.04,11.12,14.93,11.12,25.09,0,7.82-2.3,15.63-6.68,22.48h29.01V28.8c-6.59-4-14.26-7.26-22.97-9.74L76.69,7.62c-4.13-1.27-8.89-3.81-13.66-7.31C62.9,.21,62.77,.1,62.64,0H0V27.01c6.42,17.81,21.72,32.03,43.02,39.37Z"],
    ["M67.91,67.22c30.96-10.54,43.26-16.44,55.13-28.25,10.18-9.7,16.96-24.87,16.96-38.79,0-.06,0-.13,0-.19H55.99c.03,2.21,.05,4.51,.05,6.94,0,45.11-8.06,56.91-38.17,56.91H0v7.17H23.38c16.96,0,25.02,11.38,25.02,34.99,0,3.79-.42,16.02-1.27,26.14-.16,2.41-.26,5.18-.32,7.86h91.98c-.63-43.93-16.6-59.29-70.87-72.78Z"],
    ["M106.24,18.33c0,8.18-2.54,17.61-6.98,26.1l-20.62,39.62L40.87,12.67c-1.9-3.14-2.86-5.97-2.86-7.86S39.66,1.11,42.08,0H0V68.74l17.71,26.32v44.94H81.8v-52.17l22.21-43.39C116.31,20.59,129.51,4.34,140,0h-46.05c7.22,2.67,12.29,9.72,12.29,18.33Z"],
    ["M140,93.49c-7.19,2.84-14.87,4.45-22.66,4.45-14.3,0-28.02-5.72-33.74-14.3,19.21-5.79,38.9-15.32,56.4-26.77V0h-40.31c-4.89,34-13.1,55.75-25.23,68.2-4.57-2.86-6.29-6.86-8.01-20.59C61.87,15.6,49.29,.16,26.99,.16,17.31,.16,7.96,3.56,0,10.34v10.24c5.61-6.6,13.17-10.71,21.27-10.71,13.72,0,23.44,10.29,23.44,24.02,0,7.43,0,8.01-13.15,30.31q-10.87,18.87-11.44,20.01c-7.86-1.05-14.27-3.55-20.13-7.04v11.59c5.26,1.04,10.46,1.82,15.56,2.31-2.29,3.43-2.86,5.72-2.86,12.01,0,10.86,2.29,21.16,6.86,28.02,1.8,3.12,4.02,6.08,6.57,8.9h113.87v-46.51Z"],
    ["M91.55,0V90.2c0,28.46-12.37,43.61-35.26,43.61-15.47,0-25.67-6.19-31.55-19.49,5.88,2.16,10.52,3.09,16.08,3.09,18.25,0,33.1-15.47,33.1-34.33s-16.39-34.95-36.19-34.95C16.39,48.14,0,65.46,0,87.73c0,31.55,27.53,52.27,69.28,52.27,27.36,0,55.45-10.06,70.72-24.1V0h-48.45Z"],
    ...Array(12).fill(`<div class="grid-spacer"/>`),
    ["M69.31,140v-60.21h36.82v-5.6h-36.82V21.36c0-9.14,2.1-16.27,6.2-21.36H26.81c-.11,.05-.22,.1-.32,.15C11.85,7.78,3.26,18.67,0,33.86v106.14H69.31Z", "M96.43,0c-1.82,1.22-3.36,2.59-4.71,4.16-5.6,6-8.8,14.81-8.8,23.21,0,19.21,15.61,34.02,35.22,34.02,8.41,0,15.92-2.72,21.87-7.37V0h-43.57Z"],
    ["M64.02,23.87c0,67.83-1.4,80.35-9.8,97.05-5.25,10.78-13.31,13.91-37.11,13.91-8.65,0-14.06-1.27-17.1-4.26v9.42H39.25c26.35-1.61,41.68-8.39,60.83-25.34,26.61-23.31,39.91-53.22,39.91-90.09,0-8.35-.66-16.59-1.9-24.57H63.94c.06,7.1,.08,15.01,.08,23.87Z"],
    ["M51.29,15.18c20.78,0,32.77,4,43.15,15.19-11.99-2.4-23.18-3.2-31.17-3.2C29.16,27.17,4.27,50.26,0,83.85v20.44c1.8,13.78,7.31,26.02,15.65,35.71H121.21c11.89-13.49,18.79-32.09,18.79-53.69C140,35.96,103.24,0,52.09,0,31.43,0,14.77,4.23,0,14.22v19.64C14.17,22.2,32.02,15.18,51.29,15.18Z"],
    ["M140,96.76l-36.48,.45h-4.91c-32.38,0-46.12-5.89-46.12-19.13,0-7.85,5.89-13.25,14.72-13.25,2.94,0,7.36,.49,12.27,.98,16.68,2.94,31.4,4.41,42.2,4.41,6.26,0,12.39-.44,18.32-1.26v-20.66c-.7,3.14-1.56,5.43-2.62,7.2-2.94,5.4-11.28,8.83-20.12,8.83-17.66,0-25.02-15.7-24.04-50.04V0H14.72c.13,23.79,11.46,38.93,42.19,56.49-23.55,7.36-35.33,13.25-43.67,22.57C4.91,88.38,0,100.64,0,113.89c0,10.13,2.1,18.43,6.96,26.11H140v-43.24Z"],
    ["M8.54,140c19.55,0,36.97-5.1,50.99-14.87,25.92-18.27,28.47-19.12,42.5-19.12,12.75,0,26.35,5.95,30.6,13.6,1.68,3.37,2.86,6.65,3.38,20.4h3.99V0H51.93c3.57,3.34,5.28,8.26,5.48,15.07V83.91c0,21.67-5.1,34.85-15.72,41.64-7.22,4.67-17,7.22-27.62,7.22-5.12,0-9.8-.75-14.07-2.3v9.53H8.54Z"],
    ["M66.52,0V49.34c23.5,7.83,30.22,17.35,30.22,41.41,0,27.98-11.19,40.29-37.49,40.29,14.55-12.87,19.59-23.5,19.59-39.73,0-25.74-20.71-44.21-50.37-44.21-10.95,0-20.78,3.35-28.47,9.13V124.11c12.92,10.08,32.63,15.89,57.01,15.89,35.97,0,64.42-9.31,82.99-26.16V0H66.52Z"],
    ["M0,140H69.33v-35.45c0-29.81,12.68-51.37,31.08-51.37,6.98,0,13.95,3.81,16.49,10.15,7.89,16.72,10.01,21.2,11.82,76.67h11.29V26.61c-1.14-.04-2.29-.07-3.45-.07-27.9,0-44.39,9.51-67.23,40.59V0H0V140Z"],
    ["M140,132.5h-32.18v-48.56c-.6-53.36,7.22-72.55,28.86-72.55,1.15,0,2.25,.07,3.31,.19V.01c-.3,0-.6-.01-.91-.01C64.1,0,5.46,59.77,0,140H140v-7.5Z"],
    ["M123.52,127.51L42.44,0H0V72.62l29.4,47c4.8,7.18,5.91,9.69,5.91,11.85,0,4.53-3.45,7.48-9.43,8.54h114.12c-5.84-1.49-12.73-6.72-16.48-12.49Z"],
    ["M77.19,121.28V0H12.31V121.28c-.8,12.17-3.79,17.12-12.31,18.55v.17H87.2c-7.61-1.29-10.31-6.28-10.01-18.72Z"],
    ["M140,1.33c-4.23-.87-8.64-1.33-13.12-1.33-11.16,0-23.34,3.39-31.12,8.8-5.41,3.39-8.12,6.77-12.18,15.57C75.13,6.43,66,1.02,43,1.02,21.41,1.02,11.56,6.25,0,23.44v11.3c2.16-9.65,9.61-17.81,17.3-17.81s12.18,6.77,12.18,18.96v104.12h56.82V28.44c0-1.35,2.37-6.43,4.4-8.46,3.38-4.4,6.76-6.09,11.84-6.09,10.15,0,15.56,7.45,15.56,22v104.12h21.92V1.33Z"],
    ["M47.89,140c-.62-10.65-.89-22.76-.89-36.48C46.99,33.12,57.11,7.81,85.64,7.81c16.57,0,28.53,5.52,37.27,17.02-6.9-1.38-13.34-1.84-17.48-1.84-21.62,0-38.65,18.4-38.65,41.87,0,24.85,19.33,44.17,44.17,44.17,11.3,0,21.31-3.68,29.05-10.07V22.2C126.02,8.38,104.03,.1,77.4,0h-1.16C47.32,.17,20.43,11.5,0,29.66v110.34H47.89Z"],
];

export const animAssets = (echoes) => { 
    return {
        intro : {
            target : '.circle-black',
            set : { rotate : (i) => i ** R},
            rotate : '+=360',
            yoyo : false,
            duration : 5,
        },
        echoes : [
            {
                target : '.echoes-stroke',
                opacity : 0.1,
                duration : 1,
                delay : (i) => -1 + (0.1 * ( ( i%echoes ) - ( echoes-i ) /2 )),
                ease : 'power1.easeInOut',
            },
            {
                target : '.has-perspective',
                perspective : 850,
                duration : 4,
                delay : (i) => -1 + (0.1 * ( ( i%echoes ) - ( echoes-i ) /2 )),
                ease : 'power1.easeInOut',
                time:'<'
            },
        ],
       
        retrochic : [
            {
                target : '.retrochic-img',
                startAt : { rotate: (i) => Math.min( (!(i%2) ? 1 : -1 ) * Math.random()*360 , 10 ) },
                rotate: '+=360',
                yoyo: false,
                duration: 35,
                ease:'linear',
            },{
                target : '.retrochic-element',
                startAt :  { opacity : (_) => 0.5 + (Math.random() * 0.5) },
                animType : 'from',
                opacity : (i) => !(i%(Math.random()*2)) ? 0.5 + (Math.random()) : 1.2 - (Math.random()),
                ease : "power1.inOut",
                duration : 2,
                delay : (i) => Math.random() * 5,
            }
        ]
    }
}